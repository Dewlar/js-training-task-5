let errFocusNode;const borderColorOnFocus="aqua",borderColorOnBlur="#E5E5E5",errorColor="red";let firstEntryPassword=0;const password=document.querySelector(".password"),passwordConfirm=document.querySelector(".confirm-password");let validatePersonalInfo={login:!1,email:!1,password:!1};function mailErrorHighlight(r){let o=document.querySelector(".email-error");o.hidden=!!r}function equalsPassword(r){const o=document.querySelectorAll(".password-error");r?(validatePersonalInfo.password=!0,o[0].hidden=!0,o[1].hidden=!0,password.style.borderColor="#E5E5E5",passwordConfirm.style.borderColor="#E5E5E5"):(validatePersonalInfo.password=!1,o[0].hidden=!1,o[1].hidden=!1,password.style.borderColor="red",passwordConfirm.style.borderColor="red")}function validateEmail(r){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(r)}function validateForm(r){for(let o in r)if(!r[o])return!1;return!0}document.querySelector("form").onsubmit=function(){this.action="#",validateForm(validatePersonalInfo)&&console.log(validatePersonalInfo)},document.querySelectorAll("input").forEach((function(r){r.onfocus=function(){errFocusNode=r,"red"!=this.style.borderColor&&(this.style.borderColor="aqua"),this.matches(".email")&&(this.style.borderColor="aqua",mailErrorHighlight(!0))},r.onblur=function(){"red"!=this.style.borderColor&&(this.style.borderColor="#E5E5E5"),this.matches(".email")&&(validateEmail(this.value)?validatePersonalInfo.email=this.value:(this.style.borderColor="red",mailErrorHighlight(!1))),this.matches(".password")&&(firstEntryPassword?("yes"===firstEntryPassword&&(firstEntryPassword="no"),password.value!==passwordConfirm.value?equalsPassword(!1):equalsPassword(!0)):firstEntryPassword="yes")};let o=null;r.oninput=function(){if(this.matches(".login")){let e=this.value;if(e.length>10){this.value=e.substr(0,10);let s=document.querySelector(".login-error");s.hidden||clearTimeout(o),s.hidden=!1,r.style.borderColor="red",o=setTimeout((()=>{s.hidden=!0,r.style.borderColor=errFocusNode===r?"aqua":"#E5E5E5"}),2e3)}validatePersonalInfo.login=this.value}this.matches(".password")&&"no"===firstEntryPassword&&(password.value===passwordConfirm.value?(equalsPassword(!0),this.style.borderColor="aqua"):equalsPassword(!1))}}));