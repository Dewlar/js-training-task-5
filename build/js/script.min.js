let onfocusNode,errorDisplayDuration;const borderColorOnFocus="aqua",borderColorOnBlur="#E5E5E5",errorColor="red";let firstEntryPassword=0;const password=document.querySelector(".password"),passwordConfirm=document.querySelector(".confirm-password");let personalInfo={login:!1,email:!1,password:!1};function setTimerLoginError(){const r=document.querySelector(".login-error"),o=document.querySelector(".login");r.hidden||clearTimeout(errorDisplayDuration),r.hidden=!1,o.style.borderColor="red",errorDisplayDuration=setTimeout((()=>{r.hidden=!0,o.style.borderColor=onfocusNode===o?"aqua":"#E5E5E5"}),2e3)}function mailErrorHighlight(r){const o=document.querySelector(".email-error");o.hidden=!!r}function equalsPassword(r){const o=document.querySelectorAll(".password-error");r?(personalInfo.password=password.value,o[0].hidden=!0,o[1].hidden=!0,password.style.borderColor="#E5E5E5",passwordConfirm.style.borderColor="#E5E5E5"):(personalInfo.password=!1,o[0].hidden=!1,o[1].hidden=!1,password.style.borderColor="red",passwordConfirm.style.borderColor="red")}function validateEmail(r){return/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/i.test(r)}function validateForm(r){for(let o in r)if(!r[o])return!1;return!0}document.querySelector("form").onsubmit=function(){this.action="#",validateForm(personalInfo)?alert("login: "+personalInfo.login+" email: "+personalInfo.email+" password: "+personalInfo.password):alert("Проверьте правильность ввода данных.\n    Поля не должны быть пустыми!\n       Поля не должны содержать ошибки!")},document.querySelectorAll("input").forEach((function(r){r.onfocus=function(){onfocusNode=r,"red"!=this.style.borderColor&&(this.style.borderColor="aqua"),this.matches(".email")&&(this.style.borderColor="aqua",mailErrorHighlight(!0))},r.onblur=function(){"red"!=this.style.borderColor&&(this.style.borderColor="#E5E5E5"),this.matches(".email")&&(validateEmail(this.value)?personalInfo.email=this.value:(this.style.borderColor="red",mailErrorHighlight(!1),personalInfo.email=!1)),this.matches(".password")&&(firstEntryPassword?("yes"===firstEntryPassword&&(firstEntryPassword="no"),password.value!==passwordConfirm.value?equalsPassword(!1):equalsPassword(!0)):firstEntryPassword="yes")},r.oninput=function(){if(this.matches(".login")){let r=this.value;r.length>10&&(this.value=r.substr(0,10),setTimerLoginError()),personalInfo.login=this.value}this.matches(".password")&&"no"===firstEntryPassword&&(password.value===passwordConfirm.value?(equalsPassword(!0),this.style.borderColor="aqua"):equalsPassword(!1))}}));